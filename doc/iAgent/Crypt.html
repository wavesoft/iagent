<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Documentation of iAgent::Crypt</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:_atsserver@pizzly.apple.com" />
<script type="text/javascript" src="../resources/shCore.js"></script>
<script type="text/javascript" src="../resources/shBrushPerl.js"></script>
<link href="../resources/shCore.css" rel="stylesheet" type="text/css" />
<link href="../resources/shThemeEclipse.css" rel="stylesheet" type="text/css" />
<link href="../resources/core.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
SyntaxHighlighter.all();
</script></head>

<body class="doc" style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>iAgent::Crypt - Cryptographic module for iAgent</p>
<p>
</p>

<h1><a name="description">DESCRIPTION</a></h1>
<p>This module provides shorthands for accessing system-wide signing and encrypting fucntions.</p>
<pre class="brush: perl">

=cut</pre>
<p>package iAgent::Crypt;
use strict;
use warnings;
use iAgent::Log;
use iAgent::Kernel;
use Data::Dumper;
use Crypt::OpenSSL::RSA;</p>
<p>require Exporter;
our @ISA        = qw(Exporter);
our @EXPORT     = qw(DB);
our $DRIVER     = undef;</p>
<p>my  $KEY_PRIV   = undef;
my  $KEY_PUB    = undef;
my  $STORE      = &quot;&quot;;</p>
<p>############################################
# Initialize the Crypt engine
sub Initialize {
############################################
    my ($store) = @_;
    my @lines;</p>
<pre class="brush: perl">

    # Update store
    $STORE = $store;</pre>
<pre class="brush: perl">
    # Load private key
    open INPUT, &quot;&lt;$store/agent.priv&quot;;
    @lines = &lt;INPUT&gt;;
    close INPUT;
    $KEY_PRIV = Crypt::OpenSSL::new_private_key(join(&quot;\n&quot;,@lines));</pre>
<pre class="brush: perl">
    # Load public key
    open INPUT, &quot;&lt;$store/agent.pub&quot;;
    @lines = &lt;INPUT&gt;;
    close INPUT;
    $KEY_PUB = Crypt::OpenSSL::new_public_key(join(&quot;\n&quot;,@lines));</pre>
<p>}</p>
<p>############################################
sub Sign {
############################################
    my ($data) = @_;
}</p>
<p>############################################
sub Verify {
############################################
    my ($data, $key) = @_;
    $key='self' unless <code>defined($key)</code>;</p>
<pre class="brush: perl">

}</pre>
<p>############################################
sub Verify {
############################################
    my ($hash) = @_;
    
}</p>
<p>1;</p>

</body>

</html>
